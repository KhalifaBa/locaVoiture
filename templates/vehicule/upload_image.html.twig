{% extends 'base.html.twig' %}

{% block title %}Upload d'image - {{ vehicle.name }}{% endblock %}

{% block body %}
    <div class="container mt-4">
        <h2>Ajouter une image pour {{ vehicle.name }}</h2>

        {{ form_start(form) }}
            <div class="mb-3">
                {{ form_label(form.imageFile) }}
                {{ form_widget(form.imageFile, {'attr': {'class': 'form-control'}}) }}
                {{ form_errors(form.imageFile) }}
            </div>

            <button type="submit" class="btn btn-primary">
                <i class="fas fa-upload"></i> Uploader
            </button>
        {{ form_end(form) }}

        {# Affichage des images existantes #}
        {% if vehicle.images|length > 0 %}
            <div class="mt-5">
                <h4>Images existantes :</h4>
                <div class="row">
                    {% for image in vehicle.images %}
                        <div class="col-md-3 mb-3">
                            <img 
                                src="{{ asset('uploads/images/' ~ image.imageName) }}" 
                                class="img-thumbnail" 
                                alt="Image du vÃ©hicule"
                            >
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endif %}
    </div>
{% endblock %}